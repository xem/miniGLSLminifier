<h3>Mini GLSL minifier (WebGL 1.0 / 2.0)</h3>
<p>- Removes comments
<br>- Removes unnecessary spaces, tabs, line breaks
<br>- Removes zeroes in floats (ex: <b>1.0</b> => <b>1.</b> , <b>0.10</b> => <b>.1</b>)
<br>- Inserts "\n" after the macros (ex: <b>#define foo 123\n</b>) to keep all the code on a single line
<p>

<textarea oninput='value=value.replace(/\\n/g,"\n").replace(/(#.*?)\s*\n/g,"$1\\n").replace(/(\/\*[^]+?\*\/|\/\/.*|\s)+/g," ").replace(/ *([;,.{}[\]()+*\/<>=!&|^-]) */g,"$1").replace(/(\D)((\d+\.)0|0(\.\d+))(\D)/g,"$1$3$4$5")' cols=100 rows=30 placeholder="Paste GLSL code here"></textarea>

<p><b>Test shader:</b>
<p><pre style=background:#eee;padding:10px>
#version 300 es    

precision mediump float;
uniform vec3 light;
in vec3 v_position;
in vec4 v_color;
out vec4      c;\n
#define PI 3\n

void main() { /* compute fragment */
  c = vec4(
    v_color.rgb * (
      max(dot(light, normalize(cross(dFdx(v_position), dFdy(v_position)))), 0.0) // ambient light
      + 0.2 // diffuse light
    ), 1.0
  );
}
</pre>

